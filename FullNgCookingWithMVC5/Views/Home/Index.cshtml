@using Models.Ingredients;
@using Models.Recettes;
@using FullNgCookingWithMVC5.Controllers;
@{
    ViewBag.Title = "Home Page";
}


<div class="col-xs-12 col-sm-9">
    <div class="content" id="content_home">
        <h1 class="page-title">Bienvenue sur NgCooking !</h1>
        <section class="section">
            <h2 class="title">~ Meilleures recettes ~</h2>
            <div class="recettes row">
                @Html.Partial("~/Views/Recette/_BestRecettes.cshtml")
            </div>
        </section>
        @if (Request.IsAuthenticated)
        {
            <section class="section newrecette">
                <div class="row">
                    <div class="col-xs-12">
                        <p class="c">Vous en avez sous la toque ?!</p>
                        <p class="b">
                            <a href="@Url.Action("Create","Recette")" class="btn btn_color1"><span class="glyphicon glyphicon-plus-sign"></span><span>Créez une nouvelle recette</span></a>
                        </p>
                    </div>
                </div>
            </section>
        }
        @*@CreateNewRecetteHelper.CreateNewRecette()*@
        <section class="section">
            <h2 class="title">~ Nouvelles recettes ~</h2>
            <div class="recettes row">
                @Html.Partial("~/Views/Recette/_NewRecettes.cshtml")
            </div>
        </section>
    </div>
</div>
@section Scripts{
  window.onbeforeunload = function () {
           
            localStorage.setItem("recetteSubName", "");
            localStorage.setItem("ingredientsName", "");
            localStorage.setItem("minCalorieValue", "");
            localStorage.setItem("maxCalorieValue", "");
            localStorage.setItem("orderBy", $("#orderBy").val());
        }
        window.onload = function () {

            var name = localStorage.getItem("recetteSubName");
            if (name !== null) $("#recetteName").val(name);
            var ingName = localStorage.getItem("ingredientsName");
            if (ingName !== null) $("#ingredients").val(ingName);
            var minCalorieValue = localStorage.getItem("minCalorieValue");
            if (minCalorieValue !== null) $("#minCalorieValue").val(minCalorieValue);
            var maxCalorieValue = localStorage.getItem("maxCalorieValue");
            if (maxCalorieValue !== null) $("#maxCalorieValue").val(maxCalorieValue);
            var orderBy = localStorage.getItem("orderBy");
            if (orderBy !== null) $("#orderBy").val(orderBy);
        }

}
